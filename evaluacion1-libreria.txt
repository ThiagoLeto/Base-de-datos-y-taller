create database examen1_libreria_sanjuan;
use examen1_libreria_sanjuan;
create table libros (id_libro int primary key auto_increment, titulo varchar(50), autor varchar(50), editorial varchar(50), precio int, stock int, fecha_de_lanzamiento date);
create table ventas (id_venta int auto_increment primary key, fecha_venta date, id_libro int, unidades int);
insert into libros (titulo, autor,  editorial, precio, stock, fecha_de_lanzamiento) values ("Matematica", "Pablo Effeberger", "Kapelusz", 1500, 10, "2020-02-02");
insert into libros (titulo, autor,  editorial, precio, stock, fecha_de_lanzamiento) values ("Mis cinco sentidos", "Carolina Micha", "Sudamericana", 1400, 7, "2019/02/05");
insert into libros (titulo, autor,  editorial, precio, stock, fecha_de_lanzamiento) values ("El mono relojero", "Constantino Vigil", " Atlántida", 800, 12, "2021/05/05");
insert into libros (titulo, autor,  editorial, precio, stock, fecha_de_lanzamiento) values ("Redes Informáticas", "Miguel Dederkremer", "Raduses", 1000, 5, "2019/11/01");
insert into libros (titulo, autor,  editorial, precio, stock, fecha_de_lanzamiento) values ("Freddy Mercury, biografía", "Lesley Ann Jones", "Alianza", 2200, 5, "2018/06/05");
insert into ventas (fecha_venta, id_libro, unidades) values ("2018/05/03", 1, 6);
insert into ventas (fecha_venta, id_libro, unidades) values ("2019/11/04", 2, 4);
insert into ventas (fecha_venta, id_libro, unidades) values ("2021/05/03", 3, 10);
insert into ventas (fecha_venta, id_libro, unidades) values ("2021/05/03", 4, 5);
insert into ventas (fecha_venta, id_libro, unidades) values ("2020/12/06", 5, 3);
select * from libros where stock>8;
select * from libros where stock<=5;
select * from libros where precio<2000 and precio>1000;
select * from libros where editorial like '%a%';
select * from libros where editorial like 's%';
select * from libros order by fecha_de_lanzamiento;
select * from ventas order by fecha_venta desc;
select sum(stock) from libros;
select max(precio) from libros; 
select min(precio) from libros; 
select avg(precio) from libros; 
select * from ventas where fecha_venta="2021/05/03";
select * from libros where fecha_de_lanzamiento= "2021/05/03";
select * from ventas where fecha_venta between "2018/05/03" and "2019/12/31" order by fecha_venta desc;
select * from libros where stock between 4 and 14 limit 3;
insert into libros (titulo, autor, editorial, stock, fecha_de_lanzamiento) values ("titulo", "autor", "editorial", 10, "2021/11/01");
update libros set precio=1200 where id_libro=6;
select sum(stock) from libros where precio> (select avg(precio) from libros); 
alter table libros add isbn int;
select editorial, titulo, precio from libros where id_libro = (select id_libro from ventas order by unidades desc limit 1);
select stock, titulo from libros where id_libro = (select id_libro from ventas order by fecha_venta desc limit 1);